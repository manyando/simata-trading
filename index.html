<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Server Demo</title>
</head>
<body>
    <h1>Ad Server Demo</h1>
    <div id="ads-container">
        <!-- Ads will be displayed here -->
    </div>

    <script>
        // Function to fetch ads from the backend server
        function fetchAds() {
            fetch('http://localhost:4000/ads')
            .then(response => response.json())
            .then(ads => {
                ads.forEach(ad => {
                    fetch(`http://localhost:4000/ad/${ad.id}`)
                    .then(response => response.json())
                    .then(data => {
                        const adTag = data.adTag;
                        const adContainer = document.getElementById('ads-container');
                        adContainer.innerHTML += adTag;
                    })
                    .catch(error => console.error('Error fetching ad tag:', error));
                });
            })
            .catch(error => console.error('Error fetching ads:', error));
        }

        // Call the function to fetch ads when the page loads
        window.onload = fetchAds;
    </script>
</body>
</html>
